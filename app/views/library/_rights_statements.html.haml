%div
  .form
    %ul
      - rights_details.each do |rd|
        %li.delete
          - fields_for "rights_detail[#{type_id(rd)}]", rd do |fields|
            .property-type.display-edit
              .display{ error_class(rd) }
                %div
                  License:
                  = rd.license
                  %span.edit= link_to "edit", ""
                %div
                  Statement:
                  = rd.statement
                %div
                  HTML:
                  %div= rd.html
              .edit{ error_class(rd) }
                .license
                  %label
                    License:
                    = fields.text_field :license
                  %span.delete
                    = link_to "delete", ""
                .statement
                  %label
                    Statement:
                    = fields.text_field :statement
                .html
                  %label
                    HTML:
                    %div= fields.text_area :html
                = error_messages_for 'rights_detail', :object => rd
                = hidden_field_tag "rights_detail[#{type_id(rd)}][deleted]", |
                                   false, :id => nil, :class => :deleted |
      %li
        .property-type.new
          = link_to "new", ""
          %ul.template
            %li.delete
              .property-type.display-edit
                .edit
                  .license
                    %label
                      License:
                      = text_field_tag "rights_detail[new][license]", nil, :id => nil
                    %span.delete
                      = link_to "delete", ""
                      = hidden_field_tag "rights_detail[new][deleted]", |
                                         false, :id => nil |
                  .statement
                    %label
                      Statement:
                      = text_field_tag "rights_detail[new][statement]", nil, :id => nil
                  .html
                    %label
                      HTML:
                      %div= text_area_tag "rights_detail[new][html]", nil, :id => nil
