.my
  .account
    = h(current_user.login)
    Account Information
  .summary.box
    .title
      Account Summary for
      = h(current_user.login)
    .registered
      Registered since:
      = current_user.created_at.to_date.to_s(:long)
    .viewed
      = link_to_if( (current_user.downloads.size > 0), "Videos viewed:", collection_path( current_user.downloads ) )
      = current_user.downloads.size
    .favorites
      = link_to_if( (current_user.favorites.size > 0), "Favorites:", collection_path( current_user.favorites ) )
      = current_user.favorites.videos.size
    .playlists
      Playlists:
      = 0
    .subscriptions
      Subscriptions:
      = 0
    .saved_searches
      Saved searches:
      = current_user.saved_queries.size
  .searches.box
    .title Saved Searches
    - if current_user.saved_queries.size > 0
      - current_user.saved_queries.each do |sq|
        .search
          %span.title Search:
          %a{:href=>sq_path(sq)}
            %span
              - if !sq.query_string.blank?
                = '"'+ h(sq.query_string) + '"'
              - if sq.descriptor
                in
                = h sq.descriptor.descriptor_type.title
                &mdash;
                = h( sq.descriptor.text )
          .controls
            .delete
              - form_tag saved_query_path(sq), :method => :delete do
                %label.button
                  delete
                  = submit_tag "delete", :class => :hidden
  - if current_user.favorites.videos.size > 0
    .favorites.box
      .title Favorites
      = render :partial => "/collections/videos", :object => favorites_teaser
      .all= link_to "View all favorites >>", |
                     collection_path( current_user.favorites ) |