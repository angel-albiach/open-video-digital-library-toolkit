- video ||= @video
.details

  %h1.title= h video.title

  .body

    .image

      - if p = select_flash_path(video)

        %p#flash

        %script{:type => "text/javascript", :src=>"/javascripts/swfobject.js"}
        %script{:type => "text/javascript"}
          var s1 = new SWFObject('/player.swf','player','200','150','9');
          s1.addParam('allowfullscreen','true');
          s1.addParam('allowscriptaccess','always');
          s1.addParam('flashvars',
          = "'file=#{p}&image=#{video.poster_path}'"
          );
          s1.write('flash');
        
    .sentence= h video.sentence

    .navigate

      .view.first
        %div{current(:details)}= link_to_details :details
      .view
        %div{current(:fast_forward)}= link_to_details :fast_forward
      .view
        %div{current(:excerpt)}= link_to_details :excerpt
      .view.last
        %div{current(:storyboard)}= link_to_details :storyboard

      .clear

    - if params[:details_format] == "storyboard" and |
         images = video.storyboard |
      .storyboard
        
        - pp images

        - images.each do |image|
          .image
            %img{:src=>image,:alt=>"storyboard image"}

      .clear

    .downloads

      .legend Download

      .download_list

        - video.assets.each do |asset|
        
          .download

            %a{:href => asset_path( asset  )}
              = asset.filename
            &diams;
            .format= h asset.asset_format
            &loz;
            .size= number_to_human_size(asset.size)

      .clear

    .details

      .legend Video Details

      .details_list

        .detail
          .type Added:
          .value= video.created_at.to_date.to_s(:long)

          .type Updated:
          .value= video.updated_at.to_date.to_s(:long)

        %br
        %br

        - video.descriptor_types.each do |type|

          .detail
            - descriptors = video.descriptors_by_type( type )
            .type= h ( descriptors.size > 1 ? type.title.pluralize : |
                                               type.title ) + ":" |
            - descriptors.each do |descriptor|
              .value= h descriptor.text
            .clear

      .details_list

        %div= h video.rights_holder
        %div= h video.rights.statement
        %div= video.rights.html

    .clear

.sidebar
  .entry
    .title Other Videos
    %ul
      %li
        = link_to "Browse all videos", videos_path
      - if request.headers["HTTP_REFERER"]
        %li
          = link_to "Return to search results", request.headers["HTTP_REFERER"]
  .entry
    .title Related Videos
    %ul
      %li Something here
  .entry
    .title Tools and Services
    %ul.line
      - if current_user
        %li= render :partial => "videos/alter_favorites", :object => video
        %li
          = render :partial => "add_to_playlist", |
                   :object => video |
      %li Print this page
      %li
        = link_to "E-mail link to this video", mail_video( video )
    - if current_user and current_user.has_role?(  [ :admin, :cataloger ] )
      %ul.line
        %li= link_to "Edit catalog data", edit_video_path( video )
        %li= link_to( "Delete catalog data", video_path( video ), |
                       :confirm => "Are you sure you want to delete/uncatalog this video? Select OK to delete it, or Cancel to keep it.", |
                       :method => :delete ) |
      %ul
        %li= link_to "Add new video", new_video_path

.clear