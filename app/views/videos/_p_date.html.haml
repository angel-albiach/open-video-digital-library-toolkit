%li.delete
  .property-type.display-edit
    .display{ error_class(p_date) }
      %label
        = p_date.name
        \|
        %span.edit= link_to "edit", "#"
        = p_date.value
    .edit{ error_class(p_date) }
      - fields_for "property[#{type_id(p_date)}]", p_date do |fields|
        .type
          %label
            Type:
          %p
            = fields.collection_select :property_type_id, |
               property_types_by_class( property_class ), |
               :id, :name, {}, :id => gen_id |
        .value
          %label
            Value:
          %p
            = fields.text_field :value
          %label
            %span.delete= link_to "delete", "#"

        = error_messages_for 'property', :object => p_date
        = hidden_field_tag "property[#{type_id(p_date)}][deleted]", |
                             false, :id => nil, :class => :deleted |
